name: Validate PR
on: [pull_request]

jobs:
  validate_pr_job:
    runs-on: ubuntu-latest
    name: Validate Jira PR

    steps:
      - name: Validate Jira step
        id: jira-pr
        uses: rigup/jira-validations@master
        with:
          verify-from: "all"
          fail-invalid: "true"
          github-token: ${{ secrets.GITHUB_TOKEN }}
        env:
          JIRA_BASE_URL: ${{ secrets.JIRA_BASE_URL }}
          JIRA_API_TOKEN: ${{ secrets.JIRA_API_TOKEN }}
          JIRA_USER_EMAIL: ${{ secrets.JIRA_USER_EMAIL }}

      # Use the output from the `jira` step
      - name: Get the output
        run: echo "Verified ${{ steps.jira-pr.outputs.verified }}"
